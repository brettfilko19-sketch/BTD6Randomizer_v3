<!DOCTYPE html>
<html lang="en">
<head>
Â  Â  <meta charset="UTF-8">
Â  Â  <meta name="viewport" content="width=device-width, initial-scale=1.0">
Â  Â  <title>BTD6 Precise Planner - Tower Focus</title>
Â  Â  <style>
Â  Â  Â  Â  :root { --primary: #00d1b2; --bg-card: #1a1c23; --bg-body: #0b0e14; --border: #2d333b; --accent: #3298dc; }
Â  Â  Â  Â  .coop-mode { --primary: #ffdd57; --border: #5d4d8a; }
Â  Â  Â  Â  body { font-family: 'Segoe UI', sans-serif; background: var(--bg-body); color: #e0e0e0; padding: 20px; line-height: 1.4; }
Â  Â  Â  Â  .container { max-width: 900px; margin: auto; background: var(--bg-card); padding: 25px; border-radius: 12px; border: 2px solid var(--border); box-shadow: 0 10px 40px rgba(0,0,0,0.6); }
Â  Â  Â  Â  h2 { color: var(--primary); text-align: center; text-transform: uppercase; margin-bottom: 5px; }
Â  Â  Â  Â  .subtitle { text-align: center; color: #7a7a7a; font-size: 0.85em; margin-bottom: 20px; }
Â  Â  Â  Â  .coop-toggle-container { display: flex; justify-content: center; align-items: center; margin-bottom: 20px; padding: 10px; background: rgba(0,0,0,0.2); border-radius: 8px; }
Â  Â  Â  Â  .coop-toggle-container label { color: #fff; margin-left: 10px; cursor: pointer; font-size: 0.9em; font-weight: bold; }
Â  Â  Â  Â  .section-title { color: var(--primary); font-size: 0.8em; letter-spacing: 1px; margin: 20px 0 10px 0; border-bottom: 1px solid var(--border); padding-bottom: 5px; }
Â  Â  Â  Â  label { display: block; margin-bottom: 5px; color: var(--primary); font-weight: bold; font-size: 0.9em; }
Â  Â  Â  Â  select, input[type="number"] { width: 100%; padding: 10px; border-radius: 6px; background: #2d333b; color: white; border: 1px solid #3e444d; outline: none; box-sizing: border-box; margin-bottom: 10px; }
Â  Â  Â  Â  .flex-row { display: flex; gap: 15px; margin-bottom: 10px; }
Â  Â  Â  Â  .flex-row div { flex: 1; }
Â  Â  Â  Â  .projector-box { background: rgba(0, 0, 0, 0.4); border: 1px solid var(--border); padding: 15px; border-radius: 8px; margin-bottom: 20px; }
Â  Â  Â  Â  .projection-result { font-size: 1.3em; color: var(--primary); text-align: center; font-weight: bold; }
Â  Â  Â  Â  .btn-random { width: 100%; padding: 15px; background: var(--primary); color: #0b0e14; border: none; border-radius: 8px; font-weight: bold; cursor: pointer; margin-bottom: 20px; font-size: 1em; }
Â  Â  Â  Â  .summary { background: #0b0e14; padding: 20px; border-radius: 10px; border-left: 5px solid var(--primary); margin-bottom: 20px; }
Â  Â  Â  Â  .total-box { font-size: 1.8em; text-align: center; margin-top: 10px; padding: 15px; border-radius: 8px; font-weight: bold; }
Â  Â  Â  Â  .under-budget { border: 2px solid #00d1b2; color: #00d1b2; background: rgba(0, 209, 178, 0.05); }
Â  Â  Â  Â  .over-budget { border: 2px solid #ff3860; color: #ff3860; background: rgba(255, 56, 96, 0.05); }
Â  Â  Â  Â  .cost-row { display: flex; justify-content: space-between; border-bottom: 1px solid #2d333b; padding: 8px 0; font-size: 0.95em; }
Â  Â  Â  Â  .milestone-container { background: #12141a; border-radius: 8px; padding: 15px; display: flex; flex-direction: column; gap: 10px; }
Â  Â  Â  Â  .milestone-item { display: flex; justify-content: space-between; align-items: center; padding: 8px 12px; background: #1c1f26; border-radius: 4px; border-left: 4px solid var(--accent); }
Â  Â  Â  Â  .ms-label { font-size: 0.9em; font-weight: bold; }
Â  Â  Â  Â  .ms-round { color: var(--primary); font-weight: bold; font-size: 1.1em; }
Â  Â  Â  Â  .ms-impossible { color: #ff3860; font-size: 0.8em; }
Â  Â  </style>
</head>
<body id="mainBody">

<div class="container">
Â  Â  <h2>CHIMPS Build Planner</h2>
Â  Â  <div class="subtitle" id="modeSubtitle">Single Player Mode</div>

Â  Â  <div class="coop-toggle-container">
Â  Â  Â  Â  <input type="checkbox" id="coopToggle" onchange="toggleCoop()">
Â  Â  Â  Â  <label for="coopToggle">ğŸ‘¥ 3-Player Co-op (2/3 Share)</label>
Â  Â  </div>

Â  Â  <div class="section-title">PRECISION CASH PROJECTOR</div>
Â  Â  <div class="projector-box">
Â  Â  Â  Â  <div class="flex-row">
Â  Â  Â  Â  Â  Â  <div><label>Current Cash</label><input type="number" id="curCash" value="650" oninput="updateUI()"></div>
Â  Â  Â  Â  Â  Â  <div><label>Current Round</label><input type="number" id="curRound" value="6" min="6" max="100" oninput="updateUI()"></div>
Â  Â  Â  Â  Â  Â  <div><label>Target Round</label><input type="number" id="futRound" value="100" min="6" max="100" oninput="updateUI()"></div>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <div id="projectionDisplay" class="projection-result">Projected Wallet: $0</div>
Â  Â  </div>

Â  Â  <button class="btn-random" onclick="rollRandom()">ğŸ² RANDOMIZE BUILD</button>

Â  Â  <div class="flex-row">
Â  Â  Â  Â  <div><label>Hero (Reference Only):</label><select id="heroSelect" onchange="updateUI()"></select></div>
Â  Â  </div>

Â  Â  <div class="flex-row">
Â  Â  Â  Â  <div><label>Tower 1:</label><select id="tower1" onchange="updateUI()"></select></div>
Â  Â  Â  Â  <div><label>Tower 2:</label><select id="tower2" onchange="updateUI()"></select></div>
Â  Â  </div>

Â  Â  <div class="summary">
Â  Â  Â  Â  <div id="priceReport"></div>
Â  Â  Â  Â  <div id="totalDisplay" class="total-box">Total: $0</div>
Â  Â  Â  Â  <div id="saveupAdvice" style="margin-top:15px; font-style: italic; color: #95a5a6; text-align: center;"></div>
Â  Â  </div>

Â  Â  <div class="section-title">ğŸ•’ TOWER AFFORDABILITY TIMELINE</div>
Â  Â  <div class="milestone-container" id="milestoneList"></div>
</div>

<script>
const DATA = {
Â  Â  heroes: [
Â  Â  Â  Â  {name:"Quincy", price:585}, {name:"Gwendolin", price:970}, {name:"Striker Jones", price:810}, {name:"Obyn Greenfoot", price:700},
Â  Â  Â  Â  {name:"Captain Churchill", price:2160}, {name:"Benjamin", price:1295}, {name:"Ezili", price:650}, {name:"Pat Fusty", price:865},
Â  Â  Â  Â  {name:"Adora", price:1080}, {name:"Admiral Brickell", price:970}, {name:"Etienne", price:920}, {name:"Sauda", price:650},
Â  Â  Â  Â  {name:"Psi", price:1080}, {name:"Geraldo", price:1325}, {name:"Corvus", price:1325}, {name:"Rosalia", price:1100}, {name:"Silas", price:1200}
Â  Â  ],
Â  Â  P: [
Â  Â  Â  Â  {name:"Desperado: Blazing Sun", price:38400},
Â  Â  Â  Â  {name:"Desperado: Golden Justice", price:54000},
Â  Â  Â  Â  {name:"Desperado: Desert Phantom", price:42600},
Â  Â  Â  Â  {name:"Dart: Ultra-Jugg", price:18740}, {name:"Dart: PMFC", price:53700}, {name:"Dart: XBM", price:27375},
Â  Â  Â  Â  {name:"Boomer: Glaive Lord", price:42100}, {name:"Boomer: P-Charge", price:38400}, {name:"Boomer: MOAB Dom", price:63500},
Â  Â  Â  Â  {name:"Bomb: Bloon Crush", price:61000}, {name:"Bomb: Eliminator", price:29100}, {name:"Bomb: Blitz", price:40500},
Â  Â  Â  Â  {name:"Tack: Inferno Ring", price:55500}, {name:"Tack: S-Maelstrom", price:17500}, {name:"Tack: Zone", price:25850},
Â  Â  Â  Â  {name:"Ice: Super Brittle", price:32800}, {name:"Ice: Absolute Zero", price:21600}, {name:"Ice: Icicle Impale", price:38200},
Â  Â  Â  Â  {name:"Glue: Solver", price:31000}, {name:"Glue: Storm", price:19400}, {name:"Glue: Super Glue", price:33100}
Â  Â  ],
Â  Â  M: [
Â  Â  Â  Â  {name:"Sniper: Cripple MOAB", price:41000}, {name:"Sniper: Elite Sniper", price:17300}, {name:"Sniper: Elite Def", price:17500},
Â  Â  Â  Â  {name:"Sub: Energizer", price:36800}, {name:"Sub: Pre-Emptive", price:43000}, {name:"Sub: Sub Commander", price:34000},
Â  Â  Â  Â  {name:"Boat: Flagship", price:38000}, {name:"Boat: Pirate Lord", price:22800}, {name:"Boat: Trade Empire", price:24100},
Â  Â  Â  Â  {name:"Ace: Sky Shredder", price:46100}, {name:"Ace: Tsar Bomba", price:32400}, {name:"Ace: Flying Fortress", price:102000},
Â  Â  Â  Â  {name:"Heli: Apache Prime", price:58000}, {name:"Heli: Special Poperations", price:32400}, {name:"Heli: Com. Commander", price:38000},
Â  Â  Â  Â  {name:"Mortar: Biggest One", price:33400}, {name:"Mortar: Pop and Awe", price:36200}, {name:"Mortar: Blooncineration", price:45500},
Â  Â  Â  Â  {name:"Dartling: Ray of Doom", price:112000}, {name:"Dartling: M.A.D", price:69000}, {name:"Dartling: B.E.Z", price:62000}
Â  Â  ],
Â  Â  G: [
Â  Â  Â  Â  {name:"Desperado: Blazing Sun", price:38400}, {name:"Desperado: Golden Justice", price:54000}, {name:"Desperado: Desert Phantom", price:42600},
Â  Â  Â  Â  {name:"Wizard: Archmage", price:34200}, {name:"Wizard: WLP", price:58000}, {name:"Wizard: PoD", price:31800},
Â  Â  Â  Â  {name:"Super: True Sun God", price:585000}, {name:"Super: Anti-Bloon", price:103000}, {name:"Super: LotN", price:245000},
Â  Â  Â  Â  {name:"Ninja: Grandmaster", price:52000}, {name:"Ninja: Saboteur", price:25600}, {name:"Ninja: Master Bomber", price:44000},
Â  Â  Â  Â  {name:"Alch: Permabrew", price:72000}, {name:"Alch: Total Trans.", price:51000}, {name:"Alch: BMA", price:54000},
Â  Â  Â  Â  {name:"Druid: Superstorm", price:68000}, {name:"Druid: Spirit Forest", price:48000}, {name:"Druid: Avatar Wrath", price:52000},
Â  Â  Â  Â  {name:"Mermonkey: Lord of Abyss", price:36000}, {name:"Mermonkey: Popseidon", price:48000}, {name:"Mermonkey: Final Harmonic", price:42000}
Â  Â  ],
Â  Â  S: [
Â  Â  Â  Â  {name:"Spike: S-Mines", price:118000}, {name:"Spike: Carpet Spikes", price:34000}, {name:"Spike: Perma-Spike", price:39500},
Â  Â  Â  Â  {name:"Village: Prim. Expert", price:32000}, {name:"Village: Homeland", price:43200}, {name:"Village: Monkeyopolis", price:15000},
Â  Â  Â  Â  {name:"Engi: Sentry Champion", price:36000}, {name:"Engi: Ultraboost", price:101000}, {name:"Engi: XXXL Trap", price:58000},
Â  Â  Â  Â  {name:"Beast: Megalodon", price:66400}, {name:"Beast: PouÄkai", price:48000}, {name:"Beast: Giganotosaurus", price:89900}
Â  Â  ]
};

const CHIMPS_CUMULATIVE = {
Â  Â  6: 0, 7: 163, 8: 347, 9: 601, 10: 855, 11: 1036, 12: 1247, 13: 1538, 14: 1809,Â 
Â  Â  15: 2188, 16: 2533, 17: 2934, 18: 3401, 19: 3812, 20: 4319, 21: 4768, 22: 5214,Â 
Â  Â  23: 5621, 24: 5971, 25: 6418, 26: 6867, 27: 7451, 28: 8069, 29: 8617, 30: 9239,Â 
Â  Â  31: 9875, 32: 10582, 33: 11283, 34: 12154, 35: 12977, 36: 13998, 37: 15004,Â 
Â  Â  38: 16223, 39: 17316, 40: 18452, 41: 19693, 42: 21105, 43: 22442, 44: 23610,Â 
Â  Â  45: 25032, 46: 26343, 47: 28066, 48: 29774, 49: 31597, 50: 33490, 51: 35147,Â 
Â  Â  52: 36761, 53: 38407, 54: 40167, 55: 41846, 56: 43599, 57: 45318, 58: 47253,Â 
Â  Â  59: 48943, 60: 50645, 61: 52402, 62: 54181, 63: 55850, 64: 57606, 65: 59463,Â 
Â  Â  66: 61286, 67: 63148, 68: 64966, 69: 66804, 70: 68686, 71: 70550, 72: 72477,Â 
Â  Â  73: 74363, 74: 76326, 75: 78248, 76: 80108, 77: 82065, 78: 84084, 79: 86095,Â 
Â  Â  80: 88152, 81: 90240, 82: 92437, 83: 94676, 84: 96739, 85: 98863, 86: 100989,Â 
Â  Â  87: 103214, 88: 105436, 89: 107693, 90: 109968, 91: 112196, 92: 114488, 93: 116744,Â 
Â  Â  94: 119099, 95: 121408, 96: 123868, 97: 126282, 98: 128912, 99: 131518, 100: 178909
};

function getCashAtRound(r) {
Â  Â  if (r <= 6) return 0;
Â  Â  if (CHIMPS_CUMULATIVE[r] !== undefined) return CHIMPS_CUMULATIVE[r];
Â  Â  let keys = Object.keys(CHIMPS_CUMULATIVE).map(Number).sort((a,b)=>a-b);
Â  Â  for(let i=0; i<keys.length-1; i++) {
Â  Â  Â  Â  if(r > keys[i] && r < keys[i+1]) {
Â  Â  Â  Â  Â  Â  let percent = (r - keys[i]) / (keys[i+1] - keys[i]);
Â  Â  Â  Â  Â  Â  return Math.floor(CHIMPS_CUMULATIVE[keys[i]] + (CHIMPS_CUMULATIVE[keys[i+1]] - CHIMPS_CUMULATIVE[keys[i]]) * percent);
Â  Â  Â  Â  }
Â  Â  }
Â  Â  return r > 100 ? 178909 : 0;
}

function findRoundForPrice(targetPrice, curCash, curR, isCoop) {
Â  Â  for (let r = curR; r <= 100; r++) {
Â  Â  Â  Â  let earned = getCashAtRound(r) - getCashAtRound(curR);
Â  Â  Â  Â  let myShare = isCoop ? (earned * 0.6666) : earned;
Â  Â  Â  Â  if ((curCash + myShare) >= targetPrice) return r;
Â  Â  }
Â  Â  return null;
}

function toggleCoop() {
Â  Â  const isCoop = document.getElementById('coopToggle').checked;
Â  Â  document.getElementById('curCash').value = isCoop ? 900 : 650;
Â  Â  document.getElementById('curRound').value = 6;
Â  Â  updateUI();
}

function updateUI() {
Â  Â  const isCoop = document.getElementById('coopToggle').checked;
Â  Â  const curCash = parseFloat(document.getElementById('curCash').value) || 0;
Â  Â  const curR = parseInt(document.getElementById('curRound').value) || 6;
Â  Â  const futR = parseInt(document.getElementById('futRound').value) || 100;

Â  Â  const earnedTotal = getCashAtRound(futR) - getCashAtRound(curR);
Â  Â  const myShare = isCoop ? (earnedTotal * 0.6666) : earnedTotal;
Â  Â  const totalProjected = curCash + myShare;

Â  Â  document.getElementById('projectionDisplay').innerText = `Projected Wallet: $${Math.floor(totalProjected).toLocaleString()}`;
Â  Â  document.getElementById('modeSubtitle').innerText = isCoop ? "Co-op Mode (2/3 Team Share)" : "Single Player Mode";
Â  Â  document.getElementById('mainBody').classList.toggle('coop-mode', isCoop);

Â  Â  const hero = DATA.heroes[document.getElementById('heroSelect').value] || DATA.heroes[0];
Â  Â  const t1 = getTower(document.getElementById('tower1').value);
Â  Â  const t2 = getTower(document.getElementById('tower2').value);
Â  Â Â 
Â  Â  const costHero = hero.price;
Â  Â  const costT1 = t1.price;
Â  Â  const costT2 = t2.price;
Â  Â  const costTotal = costHero + costT1 + costT2;

Â  Â  document.getElementById('priceReport').innerHTML = `
Â  Â  Â  Â  <div class="cost-row"><span>${hero.name} (Ref)</span><span>$${costHero.toLocaleString()}</span></div>
Â  Â  Â  Â  <div class="cost-row"><span>${t1.name}</span><span>$${costT1.toLocaleString()}</span></div>
Â  Â  Â  Â  <div class="cost-row"><span>${t2.name}</span><span>$${costT2.toLocaleString()}</span></div>
Â  Â  `;

Â  Â  const totalBox = document.getElementById('totalDisplay');
Â  Â  totalBox.innerText = `Build Total: $${costTotal.toLocaleString()}`;
Â  Â  totalBox.className = "total-box " + (costTotal > totalProjected ? "over-budget" : "under-budget");

Â  Â  document.getElementById('saveupAdvice').innerHTML = costTotal > totalProjectedÂ 
Â  Â  Â  Â  ? `ğŸš¨ Short by $${Math.floor(costTotal - totalProjected).toLocaleString()}`
Â  Â  Â  Â  : `âœ… Affordable! Surplus: $${Math.floor(totalProjected - costTotal).toLocaleString()}`;

Â  Â  // Timeline logic excluding Hero cost
Â  Â  const rT1 = findRoundForPrice(costT1, curCash, curR, isCoop);
Â  Â  const rT2 = findRoundForPrice(costT2, curCash, curR, isCoop);
Â  Â  const rBoth = findRoundForPrice(costT1 + costT2, curCash, curR, isCoop);

Â  Â  document.getElementById('milestoneList').innerHTML = `
Â  Â  Â  Â  <div class="milestone-item">
Â  Â  Â  Â  Â  Â  <span class="ms-label">Afford ${t1.name}:</span>
Â  Â  Â  Â  Â  Â  <span class="ms-round">${rT1 ? 'Round ' + rT1 : '<span class="ms-impossible">Too Expensive</span>'}</span>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <div class="milestone-item">
Â  Â  Â  Â  Â  Â  <span class="ms-label">Afford ${t2.name}:</span>
Â  Â  Â  Â  Â  Â  <span class="ms-round">${rT2 ? 'Round ' + rT2 : '<span class="ms-impossible">Too Expensive</span>'}</span>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <div class="milestone-item" style="border-left-color: #00d1b2;">
Â  Â  Â  Â  Â  Â  <span class="ms-label">Afford BOTH Towers:</span>
Â  Â  Â  Â  Â  Â  <span class="ms-round">${rBoth ? 'Round ' + rBoth : '<span class="ms-impossible">Out of Budget</span>'}</span>
Â  Â  Â  Â  </div>
Â  Â  `;
}

function getTower(val) {
Â  Â  if(!val) return {name:"None", price:0};
Â  Â  return DATA[val[0]][val.substring(1)] || {name:"None", price:0};
}

function populate() {
Â  Â  const hSel = document.getElementById('heroSelect');
Â  Â  hSel.innerHTML = "";
Â  Â  DATA.heroes.forEach((h, i) => hSel.add(new Option(`${h.name} ($${h.price})`, i)));
Â  Â  ['tower1', 'tower2'].forEach(id => {
Â  Â  Â  Â  const s = document.getElementById(id);
Â  Â  Â  Â  s.innerHTML = "";
Â  Â  Â  Â  const cats = [{l:"Primary", k:"P"}, {l:"Military", k:"M"}, {l:"Magic", k:"G"}, {l:"Support", k:"S"}];
Â  Â  Â  Â  cats.forEach(c => {
Â  Â  Â  Â  Â  Â  const g = document.createElement('optgroup'); g.label = c.l;
Â  Â  Â  Â  Â  Â  DATA[c.k].forEach((t, i) => g.appendChild(new Option(t.name, c.k + i)));
Â  Â  Â  Â  Â  Â  s.appendChild(g);
Â  Â  Â  Â  });
Â  Â  });
}

function rollRandom() {
Â  Â  document.getElementById('heroSelect').selectedIndex = Math.floor(Math.random() * DATA.heroes.length);
Â  Â  ['tower1', 'tower2'].forEach(id => {
Â  Â  Â  Â  const cats = ['P', 'M', 'G', 'S'];
Â  Â  Â  Â  const cat = cats[Math.floor(Math.random() * 4)];
Â  Â  Â  Â  document.getElementById(id).value = cat + Math.floor(Math.random() * DATA[cat].length);
Â  Â  });
Â  Â  updateUI();
}

populate();
updateUI();
</script>
</body>
</html>
